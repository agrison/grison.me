<!DOCTYPE html>
<html>
<head>
    <title>Scalocco.scala</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <style type="text/css">
        /*--------------------- Layout and Typography ----------------------------*/
        body {
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
            font-size: 15px;
            line-height: 22px;
            color: #252519;
            margin: 0; padding: 0;
        }
        a {
            color: #261a3b;
        }
        a:visited {
            color: #261a3b;
        }
        p {
            margin: 0 0 15px 0;
        }
        h4, h5, h6 {
            color: #333;
            margin: 6px 0 6px 0;
            font-size: 13px;
        }
        h2, h3 {
            margin-bottom: 0;
            color: #000;
            overflow: hidden;
        }
        h1 {
            margin-top: 40px;
            margin-bottom: 15px;
            color: #000;
        }
        #container {
            position: relative;
        }
        #background {
            position: fixed;
            top: 0; left: 525px; right: 0; bottom: 0;
            background: #f5f5ff;
            border-left: 1px solid #e5e5ee;
            z-index: -1;
        }
        #jump_to, #jump_page {
            background: white;
            -webkit-box-shadow: 0 0 25px #777; -moz-box-shadow: 0 0 25px #777;
            -webkit-border-bottom-left-radius: 5px; -moz-border-radius-bottomleft: 5px;
            font: 10px Arial;
            text-transform: uppercase;
            cursor: pointer;
            text-align: right;
        }
        #jump_to, #jump_wrapper {
            position: fixed;
            right: 0; top: 0;
            padding: 5px 10px;
        }
        #jump_wrapper {
            padding: 0;
            display: none;
        }
        #jump_to:hover #jump_wrapper {
            display: block;
        }
        #jump_page {
            padding: 5px 0 3px;
            margin: 0 0 25px 25px;
        }
        #jump_page .source {
            display: block;
            padding: 5px 10px;
            text-decoration: none;
            border-top: 1px solid #eee;
        }
        #jump_page .source:hover {
            background: #f5f5ff;
        }
        #jump_page .source:first-child {
        }
        table td {
            border: 0;
            outline: 0;
        }
        td.docs, th.docs {
            max-width: 450px;
            min-width: 450px;
            min-height: 5px;
            padding: 10px 25px 1px 50px;
            overflow-x: hidden;
            vertical-align: top;
            text-align: left;
        }
        .docs pre {
            margin: 15px 0 15px;
            padding-left: 15px;
        }
        .docs p tt, .docs p code, .doc code {
            background: #f8f8ff;
            border: 1px solid #dedede;
            font-size: 12px;
            padding: 0 0.2em;
        }
        .pilwrap {
            position: relative;
        }
        .pilcrow {
            font: 12px Arial;
            text-decoration: none;
            color: #454545;
            position: absolute;
            top: 3px; left: -20px;
            padding: 1px 2px;
            opacity: 0;
            -webkit-transition: opacity 0.2s linear;
        }
        td.docs:hover .pilcrow {
            opacity: 1;
        }
        td.code, th.code {
            padding: 14px 15px 16px 25px;
            width: 100%;
            vertical-align: top;
            background: #f5f5ff;
            border-left: 1px solid #e5e5ee;
        }
        pre, tt, code {
            font-size: 12px; line-height: 18px;
            font-family: Menlo, Monaco, Consolas, "Lucida Console", monospace;
            margin: 0; padding: 0;
        }

        /*---------------------- Prettify Syntax Highlighting -----------------------------*/
        .str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun{color:#660}.pln{color:#000}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec{color:#606}pre.prettyprint{padding:2px;border:1px solid #888}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}@media print{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun{color:#440}.pln{color:#000}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}

        table.doc { margin-bottom: 20px; }
        td.doc { border-bottom: 1px dashed #708090; }
        td.param { font-weight: bold; }
        td.return { font-weight: bold; text-decoration: underline; }
    </style>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/r224/prettify.js" type="text/javascript"></script>
    <script src="https://google-code-prettify.googlecode.com/svn/trunk/src/lang-scala.js" type="text/javascript"></script>
</head>

<body onload="prettyPrint()">
<div id="container">
    <div id="background"></div>
    <div id="jump_to">
        Jump To &hellip;
        <div id="jump_wrapper">
            <div id="jump_page">
                <a class="source" href="http://grison.me/scalocco">grison.me/scalocco</a>
                <a class="source" href="http://github.com/agrison/scalocco">scalocco@github</a>
            </div>
        </div>
    </div>

    <table cellpadding="0" cellspacing="0">
        <thead>
        <tr>
            <th class="docs">
                <h1>Scalocco.scala</h1>
            </th>
            <th class="code"></th>
        </tr>
        </thead>
        <tbody>
        
        <tr id="section_0">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_0">&#182;</a>
                </div>
                <p> <strong>Scalocco</strong> is a really quick-and-dirty, literate-programming-style documentation
 generator. It is a Scala port of <a href="http://jashkenas.github.com/docco/">Docco</a>,
 which was written by <a href="https://github.com/jashkenas">Jeremy Ashkenas</a> in
 Coffescript and runs on node.js.</p>

<p> Scalocco produces HTML that displays your comments alongside your code.
 Comments are passed through
 <a href="http://daringfireball.net/projects/markdown/syntax">Markdown</a>, and code is
 highlighted using <a href="http://code.google.com/p/google-code-prettify/">google-code-prettify</a>
 syntax highlighting. This page is the result of running Scalocco against its
 own source file.</p>

<p> Currently, to build Scalocco, you'll need <strong>maven</strong> and <strong>scala</strong>. The project
 depends on <a href="https://github.com/vspy/scala-mustache">scala-mustache</a> and
 <a href="https://code.google.com/p/markdown4j/">Markdown4j</a></p>

<p> To use Scalocco, run it from the command-line:</p>

<pre><code> java -jar scalocco.jar .
</code></pre>

<p> ...will generate linked HTML documentation for the named source files, saving
 it into a <code>docs</code> folder.</p>

<p> The <a href="http://github.com/agrison/scalacco">source for Scalocco</a> is available on GitHub (and also,
 on the right of this very webpage) and released under the MIT license.</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>/****************************************************************************************
 ______     ______     ______     __         ______     ______     ______     ______    
/\  ___\   /\  ___\   /\  __ \   /\ \       /\  __ \   /\  ___\   /\  ___\   /\  __ \   
\ \___  \  \ \ \____  \ \  __ \  \ \ \____  \ \ \/\ \  \ \ \____  \ \ \____  \ \ \/\ \  
 \/\_____\  \ \_____\  \ \_\ \_\  \ \_____\  \ \_____\  \ \_____\  \ \_____\  \ \_____\ 
  \/_____/   \/_____/   \/_/\/_/   \/_____/   \/_____/   \/_____/   \/_____/   \/_____/

                         Scala implementation of Docco
                         -----------------------------
         Produces HTML pages that displays your comments alongside your code.
****************************************************************************************/                                                                                        
package me.grison.scalocco

</code></pre>
            </td>
        </tr>
        
        <tr id="section_1">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_1">&#182;</a>
                </div>
                <h3 id="imports">Imports</h3>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>import java.io._
import io.Source
import java.util.UUID

</code></pre>
            </td>
        </tr>
        
        <tr id="section_2">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_2">&#182;</a>
                </div>
                <h4 id="import-for-processing-markdown">Import for processing Markdown</h4>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>import com.petebevin.markdown.MarkdownProcessor;

</code></pre>
            </td>
        </tr>
        
        <tr id="section_3">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_3">&#182;</a>
                </div>
                <h3 id="section-class">Section class</h3>

<p> The <code>Section</code> class is just an object having two fields to represent
* the Scala code ;
* the documentation that goes along with the previous code.</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>case class Section(doc: String, code: String)

</code></pre>
            </td>
        </tr>
        
        <tr id="section_4">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_4">&#182;</a>
                </div>
                <h2 id="markdown">Markdown</h2>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>class Markdown {
    class MarkdownableString(s: String) {
</code></pre>
            </td>
        </tr>
        
        <tr id="section_5">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_5">&#182;</a>
                </div>
                <p> <em>Markdownify</em> the given text.</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        def markdown = new MarkdownProcessor().markdown(s)
</code></pre>
            </td>
        </tr>
        
        <tr id="section_6">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_6">&#182;</a>
                </div>
                <p> <em>Markdownify</em> the given text but removes the <code>&lt;p/&gt;</code> tags from the result</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        def mkdNoP = markdown.replaceAll(&quot;&lt;/?p&gt;&quot;, &quot;&quot;).trim()
</code></pre>
            </td>
        </tr>
        
        <tr id="section_7">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_7">&#182;</a>
                </div>
                <p> Creates a <em>Mustache</em> object whose template is the given String</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        def mustache = new Mustache(s)
    }
</code></pre>
            </td>
        </tr>
        
        <tr id="section_8">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_8">&#182;</a>
                </div>
                <p> Enrich the <code>String</code> class with two methods <code>markdown</code> and <code>mkdNoP</code></p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>    implicit def markdownStringWrapper(str: String) = new MarkdownableString(str)
}

</code></pre>
            </td>
        </tr>
        
        <tr id="section_9">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_9">&#182;</a>
                </div>
                <h2 id="scalocco">Scalocco</h2>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>object Scalocco extends Markdown {
</code></pre>
            </td>
        </tr>
        
        <tr id="section_10">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_10">&#182;</a>
                </div>
                <p> This value is used to differentiate normal comments from scaladoc style.</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>    val scaladoc = UUID.randomUUID().toString

</code></pre>
            </td>
        </tr>
        
        <tr id="section_11">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_11">&#182;</a>
                </div>
                <h2 id="scaladoc-parsing">ScalaDoc Parsing</h2>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>    object ScalaDocParser {
</code></pre>
            </td>
        </tr>
        
        <tr id="section_12">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_12">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Abstract class representing a Scaladoc item.</td></tr><tr><td class='param'><tt>tpl</tt></td><td class='param-doc'>the Mustache template to be used to render the Scaladoc.</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        abstract case class DocItem(tpl: Mustache) {
</code></pre>
            </td>
        </tr>
        
        <tr id="section_13">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_13">&#182;</a>
                </div>
                <p> Render this Scaladoc item</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>            def render = tpl.render(this)
        }

</code></pre>
            </td>
        </tr>
        
        <tr id="section_14">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_14">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Scaladoc item representing the documentation itself</td></tr><tr><td class='param'><tt>doc</tt></td><td class='param-doc'>the global scaladoc documentation.</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        case class Doc(doc: String)
            extends DocItem(&quot;&lt;tr&gt;&lt;td colspan='2' class='doc'&gt;{{{doc}}}&lt;/td&gt;&lt;/tr&gt;&quot;.mustache)

</code></pre>
            </td>
        </tr>
        
        <tr id="section_15">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_15">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Scaladoc item representing a param as described in the ScalaDoc</td></tr><tr><td class='param'><tt>param</tt></td><td class='param-doc'>the parameter name.</td></tr><tr><td class='param'><tt>doc</tt></td><td class='param-doc'>the documentation associated to this param.</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        case class Param(param: String, doc: String)
            extends DocItem(&quot;&lt;tr&gt;&lt;td class='param'&gt;&lt;tt&gt;{{param}}&lt;/tt&gt;&lt;/td&gt;&lt;td class='param-doc'&gt;{{{doc}}}&lt;/td&gt;&lt;/tr&gt;&quot;.mustache)

</code></pre>
            </td>
        </tr>
        
        <tr id="section_16">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_16">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Scaladoc item representing the return as described in the ScalaDoc</td></tr><tr><td class='param'><tt>doc</tt></td><td class='param-doc'>the documentation associated to the return.</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        case class Return(doc: String)
            extends DocItem(&quot;&lt;tr&gt;&lt;td class='return'&gt;returns:&lt;/td&gt;&lt;td&gt;{{{doc}}}&lt;/td&gt;&lt;/tr&gt;&quot;.mustache)

</code></pre>
            </td>
        </tr>
        
        <tr id="section_17">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_17">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Sanitize the input by removing start tag, end tag and stars in the scaladoc.</td></tr><tr><td class='param'><tt>s</tt></td><td class='param-doc'>the String to sanitize.</td></tr><tr><td class='return'>returns:</td><td>the sanitized String with scaladoc special syntax removed.</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        def sanitize(s: String) : String =
            s.replaceAll(&quot;\\s*/?[*]+/?\\s+&quot;, &quot; &quot;).replaceAll(&quot;\\s+[*]\\s+&quot;, &quot;&quot;).trim()

</code></pre>
            </td>
        </tr>
        
        <tr id="section_18">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_18">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Parse the given String as a <code>List</code> of <code>DocItem</code>.</td></tr><tr><td class='param'><tt>s</tt></td><td class='param-doc'>the String to be parsed.</td></tr><tr><td class='return'>returns:</td><td>a <code>List</code> of <code>DocItem</code> representing the original argument.</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        def parse(s: String) : List[DocItem] = {
            s.split(&quot;[*]\\s*@(p|r)&quot;).toList.map(st =&gt;
                sanitize(st).split(&quot;\\s+&quot;).toList match {
                    case &quot;aram&quot; :: t =&gt; Param(t.head, t.tail.mkString(&quot; &quot;).mkdNoP)
                    case &quot;eturn&quot; :: r =&gt; Return(r.mkString(&quot; &quot;).mkdNoP)
                    case x =&gt; Doc(x.mkString(&quot; &quot;).mkdNoP)
                }
            )
        }

</code></pre>
            </td>
        </tr>
        
        <tr id="section_19">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_19">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Convert a String representing some Scaladoc to an HTML table showing its content.</td></tr><tr><td class='param'><tt>s</tt></td><td class='param-doc'>the Scaladoc String.</td></tr><tr><td class='return'>returns:</td><td>the HTML table representation of the given Scaladoc.</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        def toHtml(s: String) : String = {
            val sb: StringBuilder = new StringBuilder(&quot;&lt;table class='doc'&gt;&quot;)
            parse(s).foreach(item =&gt; sb.append(item.render))
            sb.append(&quot;&lt;/table&gt;&quot;).toString()
        }
    }

</code></pre>
            </td>
        </tr>
        
        <tr id="section_20">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_20">&#182;</a>
                </div>
                <p> Keep track of all the sources (as <code>File</code> objects) we are generating the documentation for.</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>    var sources = List[File]()

</code></pre>
            </td>
        </tr>
        
        <tr id="section_21">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_21">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Returns a <code>Stream</code> of scala files found in the given directory.</td></tr><tr><td class='param'><tt>dir</tt></td><td class='param-doc'>the directory where to search for Scala and Java files.</td></tr><tr><td class='return'>returns:</td><td>a <code>Stream</code> of File objects.</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>    def scalaFiles(dir: String): Stream[File] = {
        def files(f: File): Stream[File] = {
            f #:: (if (f.isDirectory) f.listFiles().toStream.flatMap(files) else Stream.empty)
        }
        files(new File(dir)).filter(_.getName.endsWith(&quot;.scala&quot;))
    }

</code></pre>
            </td>
        </tr>
        
        <tr id="section_22">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_22">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Parse the different sections of code, along with their respective comments.</td></tr><tr><td class='param'><tt>source</tt></td><td class='param-doc'>the source File</td></tr><tr><td class='return'>returns:</td><td>the list of sections</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>    def parseSections(source: File): List[Section] = {
</code></pre>
            </td>
        </tr>
        
        <tr id="section_23">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_23">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Transform the documentation into an HTML table if it's in Scaladoc style, don't touch it otherwise</td></tr><tr><td class='param'><tt>doc</tt></td><td class='param-doc'>a StringBuilder containing the documentation</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        def scaladocIfNeeded(doc: StringBuilder) =
            if (doc.startsWith(scaladoc)) ScalaDocParser.toHtml(doc.substring(scaladoc.length)) else doc.toString

</code></pre>
            </td>
        </tr>
        
        <tr id="section_24">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_24">&#182;</a>
                </div>
                <p> will hold the sections in the file</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        var sections = List[Section]()
</code></pre>
            </td>
        </tr>
        
        <tr id="section_25">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_25">&#182;</a>
                </div>
                <p> the <code>hasCode</code> variable remembers if we were reading code before a comment</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        var (hasCode, inScalaDoc) = (false, false)
</code></pre>
            </td>
        </tr>
        
        <tr id="section_26">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_26">&#182;</a>
                </div>
                <p> the two buffers, one for documentation, the other for scala code</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        var (doc, code) = (new StringBuilder, new StringBuilder)
</code></pre>
            </td>
        </tr>
        
        <tr id="section_27">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_27">&#182;</a>
                </div>
                <p> for each line in the source code</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        Source.fromFile(source).getLines().foreach(line =&gt;
</code></pre>
            </td>
        </tr>
        
        <tr id="section_28">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_28">&#182;</a>
                </div>
                <p> Reading start of scaladoc <code>/**</code></p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>            if (line.matches(&quot;^\\s*/[*]{2}[^*]*&quot;)) {
                inScalaDoc = true
</code></pre>
            </td>
        </tr>
        
        <tr id="section_29">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_29">&#182;</a>
                </div>
                <p> Reading end of scaladoc <code>*/</code></p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>            } else if (line.matches(&quot;[^*]*[*]/\\s*$&quot;)) {
                inScalaDoc = false;
</code></pre>
            </td>
        </tr>
        
        <tr id="section_30">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_30">&#182;</a>
                </div>
                <p> Reading a comment line <code>//</code> or <code>*</code> if inside <code>Scaladoc</code></p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>            } else if (line.matches(&quot;^\\s*//.*&quot;) || (inScalaDoc &amp;&amp; line.matches(&quot;^\\s*[*].*&quot;))) {
</code></pre>
            </td>
        </tr>
        
        <tr id="section_31">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_31">&#182;</a>
                </div>
                <p> if we did had code, store the code and documentation in the resulting section list</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>                if (hasCode) {
                    val documentation = scaladocIfNeeded(doc)
                    sections ::= Section(documentation, code.toString)
                    hasCode = false
                    doc = new StringBuilder
                    if (inScalaDoc) doc.append(scaladoc)
                    code = new StringBuilder
                }
                doc.append(line.replaceFirst(&quot;^\\s*//&quot;, &quot;&quot;)).append(&quot;\n&quot;)
            } else {
                hasCode = true
                code.append(line).append(&quot;\n&quot;)
                inScalaDoc = false
            }
        )
</code></pre>
            </td>
        </tr>
        
        <tr id="section_32">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_32">&#182;</a>
                </div>
                <p> don't forget what's in the buffer at the end</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        sections ::= Section(scaladocIfNeeded(doc), code.toString)
</code></pre>
            </td>
        </tr>
        
        <tr id="section_33">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_33">&#182;</a>
                </div>
                <p> return all the sections we did found</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        sections.toList.reverse
    }

</code></pre>
            </td>
        </tr>
        
        <tr id="section_34">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_34">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Generate the HTML documentation for the given File and sections.</td></tr><tr><td class='param'><tt>source</tt></td><td class='param-doc'>the file to be documented.</td></tr><tr><td class='param'><tt>path</tt></td><td class='param-doc'>the Path of the original file.</td></tr><tr><td class='param'><tt>destPath</tt></td><td class='param-doc'>the Path where to write the documentation file.</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>    def documentFile(source: File, path: String, destPath: String) = {
        val sections = parseSections(source)
        val mustache = new Mustache(Source.fromURL(getClass.getResource(&quot;/template.html&quot;)).mkString)
        val html = mustache.render(Map(
</code></pre>
            </td>
        </tr>
        
        <tr id="section_35">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_35">&#182;</a>
                </div>
                <p> This is the title of the Scala source file</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>            &quot;title&quot; -&gt; source.getName,
</code></pre>
            </td>
        </tr>
        
        <tr id="section_36">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_36">&#182;</a>
                </div>
                <p> The sources are available in the right-upper box on the generated documentation</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>            &quot;sources&quot; -&gt; sources,
</code></pre>
            </td>
        </tr>
        
        <tr id="section_37">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_37">&#182;</a>
                </div>
                <p> keep indexes for sections</p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>            &quot;sections&quot; -&gt; sections.zipWithIndex.map(t =&gt;
                Map(&quot;index&quot; -&gt; t._2, &quot;code&quot; -&gt; t._1.code, &quot;doc&quot; -&gt; t._1.doc.markdown))
        ))
        val outputFile = new File(source.getCanonicalPath.replace(path, destPath) + &quot;.html&quot;)
        println(&quot;Generating documentation: &quot; + outputFile.getCanonicalPath)
</code></pre>
            </td>
        </tr>
        
        <tr id="section_38">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_38">&#182;</a>
                </div>
                <p> output the HTML rendered with Mustache into a file named <code>SOURCE_FILE.scala.html</code></p>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>        val p = new PrintWriter(outputFile)
        try { p.write(html) } finally { p.close() }
    }

</code></pre>
            </td>
        </tr>
        
        <tr id="section_39">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_39">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Generate some documentation.</td></tr><tr><td class='param'><tt>path</tt></td><td class='param-doc'>the Path were we may find some scala files.</td></tr><tr><td class='param'><tt>destPath</tt></td><td class='param-doc'>the Path were we should output the documentation.</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>    def generateDoc(path: String, destPath: String) = {
        val files = scalaFiles(path)
        sources = files.toList
        if (!new File(destPath).exists())
            new File(destPath).mkdirs()
        files.foreach(documentFile(_, path, destPath))
    }

</code></pre>
            </td>
        </tr>
        
        <tr id="section_40">
            <td class="docs">
                <div class="pilwrap">
                    <a class="pilcrow" href="#section_40">&#182;</a>
                </div>
                <table class='doc'><tr><td colspan='2' class='doc'>Simply run <strong><code>scalocco</code></strong>.</td></tr><tr><td class='param'><tt>args</tt></td><td class='param-doc'>the arguments to the program</td></tr></table>

            </td>
            <td class="code">
                <pre><code class='prettyprint lang-scala'>    def main(args: Array[String]) {
        generateDoc(args(0), Option(args(1)).getOrElse(&quot;./docs/&quot;))
    }
}
</code></pre>
            </td>
        </tr>
        
        </tbody>
    </table>
</div>
</body>
</html>
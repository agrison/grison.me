<!DOCTYPE html>
<html lang="fr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>grison.me - Article: Unix Prompt, White Input Line and Solarized</title>
  <link href="/media/javascripts/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <link rel="stylesheet" href="/media/style/grison.css" />
  <link rel="shortcut icon" type="image/png" href="/media/images/favicon.png"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
  <script src="/media/javascripts/main.js" charset="utf-8"></script>
</head>

<body>

  <header> 
    <h1><a href="/"><span>@Autowired </span>Geek</a></h1>
    <h2>Alexandre Grison</h2>
    <nav> 
      <ul> 
        <li><a href="/">Blog</a></li>
        <li><a href="/categories">Categories</a></li>
        <li><a href="/tags">Tags</a></li>
        <li><a href="/projects">Projects</a></li>
        <li><a href="/ego" class="ego">Ego</a></li>
      </ul> 
    </nav>
  </header>

  <div id="content">
	<div class="date">20-11 2011</div>
    <section class="posts">
<article>
<h1><a href="/2011/11/Unix-Prompt">Unix Prompt</a></h1>

<p>Arriving at my new working place, I wanted to install my own <code>.bashrc</code> and other <code>dotfiles</code>, like I had on my previous work station.</p>

<p>But this time, I wanted a distinguishable prompt with nice colors and still easy for the eyes. So I decided to go on with the <a href="http://ethanschoonover.com/solarized">Solarized</a> theme and installed it for PuTTY, Vim and other tools I use on a daily basis.</p>

<p>The next little challenge for me was to clearly differenciate the command line in my prompt (the things I type) with another color than the output that gets generated. After a few research on the net, I've found a solution that works pretty well.</p>

<p>I'm using bash, and here is a screen of PuTTY on my Windows 7 work station:</p>

<p align="center"><img src="/media/images/putty.png" alt="PuTTY with Unix Prompt" /></p>

<p>The solution was to use thre <code>trap</code> command to reset the colors before the shell outputs something, and let the color in white at the end of <code>PS1</code>.</p>

<p>Here is an excerpt of my <code>.bashrc</code></p>

<div class="highlight"><pre><code class="bash"><span class="c"># Reset</span>
<span class="nv">Color_Off</span><span class="o">=</span><span class="s1">&#39;\[\e[0m\]&#39;</span>       <span class="c"># Text Reset</span>

<span class="c"># Colors will work nice when used with &quot;Solarized&quot; palette.</span>
<span class="c"># Nothing new here</span>
<span class="nv">White</span><span class="o">=</span><span class="s1">&#39;\[\e[0;37m\]&#39;</span>        <span class="c"># White</span>
<span class="nv">BPurple</span><span class="o">=</span><span class="s1">&#39;\[\e[1;35m\]&#39;</span>      <span class="c"># Purple</span>
<span class="nv">Green</span><span class="o">=</span><span class="s1">&#39;\[\e[0;32m\]&#39;</span>        <span class="c"># Green</span>
<span class="nv">Blue</span><span class="o">=</span><span class="s1">&#39;\[\e[0;34m\]&#39;</span>         <span class="c"># Blue</span>
<span class="nv">Yellow</span><span class="o">=</span><span class="s1">&#39;\[\e[0;33m\]&#39;</span>       <span class="c"># Yellow</span>
<span class="nv">Purple</span><span class="o">=</span><span class="s1">&#39;\[\e[0;35m\]&#39;</span>       <span class="c"># Purple</span>
<span class="nv">BWhite</span><span class="o">=</span><span class="s1">&#39;\[\e[1;37m\]&#39;</span>       <span class="c"># White</span>

<span class="c"># custom prompt. </span>
<span class="c"># User input is colored in white</span>
<span class="c"># the trap will reset the colors before execution of commands</span>
<span class="nv">PS1</span><span class="o">=</span><span class="s2">&quot;${BPurple}\A ${Green}\u${Color_Off}@${Blue}\h${Color_Off}:[${Yellow}\w${Color_Off}]${Purple}\n$ ${BWhite}&quot;</span>

<span class="c"># reset color after prompt</span>
<span class="nb">trap</span> <span class="s2">&quot;echo -ne &#39;\e[0m&#39;&quot;</span> DEBUG
</code></pre>
</div>

<p>The <code>trap</code> command will execute <code>echo -ne '\e[Om'</code> before anything gets written on stdout, and thus will reset the color that was previously left to white. This is the only real trick in this post. Nevertheless, it's still pretty cool.</p>

<p>Enjoy your nice prompt <span style="font-size: 24px">&#x263a;</span></p>

</article>



<div id="disqus_thread"></div>

<script type="text/javascript">
    var disqus_shortname = 'grison';
    var disqus_identifier = '/2011/11/Unix-Prompt';
    var disqus_url = 'http://www.grison.me/2011/11/Unix-Prompt';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


    </section>
  </div>

  <footer>
    <div class="about">Hey! I'm built using super-hype technologies <span style="font-size: 18px">&#x263a;</span></div>
    <div class="contact"><a href="#social" class="lsocial">Contact</a></div>
	<br/>
	<div id="social" style="clear: both;">
		<img src="/media/images/facebook.png" alt="Reach me on facebook" title="facebook" /> <a href="https://www.facebook.com/alexandre.grison">alexandre.grison</a> &nbsp;&mdash;&nbsp;
		<img src="/media/images/tw.png" alt="Follow me on twitter" title="twitter" /> <a href="http://twitter.com/#!/algrison">@algrison</a> &nbsp;&mdash;&nbsp; 
		<img src="/media/images/linkedin.png" alt="Buy me on linkedin" title="linkedin" /> <a href="http://fr.linkedin.com/pub/alexandre-grison/39/ba6/b56">alexandre grison</a> &nbsp;&mdash;&nbsp; 
		<img src="/media/images/github.png" alt="Browse me on Github" title="github" /> <a href="http://github.com/agrison">agrison</a> &nbsp;&mdash;&nbsp;
		<img src="/media/images/flickr.png" alt="View my awesomeness on Flickr" title="flickr" /> <a href="http://www.flickr.com/photos/agrison/">agrison</a>
	</div>
  </footer>
</body>
</html>